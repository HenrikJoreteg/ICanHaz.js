(function(){var k=function(){var e=function(){};e.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,c,b,d){if(!d)this.context=c,this.buffer=[];if(this.includes("",a)){a=this.render_pragmas(a);a=this.render_section(a,c,b);if(d)return this.render_tags(a,c,b,d);this.render_tags(a,c,b,d)}else{if(d)return a;this.send(a)}},send:function(a){""!==a&&this.buffer.push(a)},render_pragmas:function(a){if(!this.includes("%",a))return a;
var c=this;return a.replace(RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag,"g"),function(a,d,g){if(!c.pragmas_implemented[d])throw{message:"This implementation of mustache doesn't understand the '"+d+"' pragma"};c.pragmas[d]={};g&&(a=g.split("="),c.pragmas[d][a[0]]=a[1]);return""})},render_partial:function(a,c,b){a=this.trim(a);if(!b||void 0===b[a])throw{message:"unknown_partial '"+a+"'"};return"object"!=typeof c[a]?this.render(b[a],c,b,!0):this.render(b[a],c[a],b,!0)},render_section:function(a,
c,b){if(!this.includes("#",a)&&!this.includes("^",a))return a;var d=this;return a.replace(RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(a,e,i,f){a=d.find(i,c);if("^"==e)return!a||d.is_array(a)&&0===a.length?d.render(f,c,b,!0):"";if("#"==e)return d.is_array(a)?d.map(a,function(a){return d.render(f,d.create_context(a),b,!0)}).join(""):d.is_object(a)?d.render(f,d.create_context(a),b,!0):"function"===typeof a?a.call(c,f,
function(a){return d.render(a,c,b,!0)}):a?d.render(f,c,b,!0):""})},render_tags:function(a,c,b,d){for(var e=this,j=function(){return RegExp(e.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+e.ctag+"+","g")},i=j(),f=function(a,d,f){switch(d){case "!":return"";case "=":return e.set_delimiters(f),i=j(),"";case ">":return e.render_partial(f,c,b);case "{":return e.find(f,c);default:return e.escape(e.find(f,c))}},a=a.split("\n"),h=0;h<a.length;h++)a[h]=a[h].replace(i,f,this),d||this.send(a[h]);if(d)return a.join("\n")},
set_delimiters:function(a){a=a.split(" ");this.otag=this.escape_regex(a[0]);this.ctag=this.escape_regex(a[1])},escape_regex:function(a){if(!arguments.callee.sRE)arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,c){var a=this.trim(a),b;!1===c[a]||0===c[a]||c[a]?b=c[a]:(!1===this.context[a]||0===this.context[a]||this.context[a])&&(b=this.context[a]);return"function"===typeof b?b.apply(c):void 0!==
b?b:""},includes:function(a,c){return-1!=c.indexOf(this.otag+a)},escape:function(a){return(""+(null===a?"":a)).replace(/&(?!\w+;)|["'<>\\]/g,function(a){switch(a){case "&":return"&amp;";case "\\":return"\\\\";case '"':return"&quot;";case "'":return"&#39;";case "<":return"&lt;";case ">":return"&gt;";default:return a}})},create_context:function(a){if(this.is_object(a))return a;var c=".";if(this.pragmas["IMPLICIT-ITERATOR"])c=this.pragmas["IMPLICIT-ITERATOR"].iterator;var b={};b[c]=a;return b},is_object:function(a){return a&&
"object"==typeof a},is_array:function(a){return"[object Array]"===Object.prototype.toString.call(a)},trim:function(a){return a.replace(/^\s*|\s*$/g,"")},map:function(a,c){if("function"==typeof a.map)return a.map(c);for(var b=[],d=a.length,e=0;e<d;e++)b.push(c(a[e]));return b}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(a,c,b,d){var g=new e;if(d)g.send=d;g.render(a,c,b);if(!d)return g.buffer.join("\n")}}}();(function(){var e={VERSION:"0.9-dev",templates:{},$:"undefined"!==typeof window?
window.jQuery||window.Zepto||null:null,addTemplate:function(a,c){if(e[a])throw"Invalid name: "+a+".";if(e.templates[a])throw'Template " + name + " exists';e.templates[a]=c;e[a]=function(b,c){var b=b||{},g=k.to_html(e.templates[a],b,e.templates);return e.$&&!c?e.$(g):g}},clearAll:function(){for(var a in e.templates)delete e[a];e.templates={}},refresh:function(){e.clearAll();e.grabTemplates()},grabTemplates:function(){var a,c=document.getElementsByTagName("script"),b,d=[];for(a=0,l=c.length;a<l;a++)if((b=
c[a])&&b.innerHTML&&b.id&&("text/html"===b.type||"text/x-icanhaz"===b.type))e.addTemplate(b.id,"".trim?b.innerHTML.trim():b.innerHTML.replace(/^\s+/,"").replace(/\s+$/,"")),d.unshift(b);for(a=0,l=d.length;a<l;a++)d[a].parentNode.removeChild(d[a])}};"undefined"!==typeof require?module.exports=e:window.ich=e;"undefined"!==typeof document&&(e.$?e.$(function(){e.grabTemplates()}):document.addEventListener("DOMContentLoaded",function(){e.grabTemplates()}))})()})();
